<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green Hub Portal - Empleados</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hero-section {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .notification-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            min-width: 300px;
        }
        .notification-dropdown.show {
            display: block;
        }
        .occupied {
            background-color: #fee2e2 !important;
            color: #991b1b !important;
            cursor: not-allowed !important;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="hero-section text-white p-6">
            <div class="max-w-6xl mx-auto flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold">üå± Green Hub Portal</h1>
                    <p class="text-green-100 mt-2">¬°Buenos d√≠as, equipo Green Hub!</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button onclick="toggleNotifications()" class="relative p-2 bg-green-600 rounded-full hover:bg-green-700 transition-colors">
                            üîî
                            <span id="notification-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">2</span>
                        </button>
                        <div id="notification-dropdown" class="notification-dropdown">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="font-semibold text-gray-800">Notificaciones Recientes</h3>
                            </div>
                            <div id="notification-list" class="max-h-64 overflow-y-auto">
                                <!-- Las notificaciones se cargar√°n aqu√≠ -->
                            </div>
                            <div class="p-3 border-t border-gray-200">
                                <button onclick="showSection('news')" class="text-green-600 hover:text-green-700 text-sm font-medium">
                                    Ver todas las noticias ‚Üí
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold">Empleado Green Hub</p>
                        <p class="text-green-100 text-sm">Portal de Empleados</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-md">
            <div class="max-w-6xl mx-auto px-6">
                <div class="flex space-x-8">
                    <button onclick="showSection('home')" class="nav-btn py-4 px-2 border-b-2 border-green-500 text-green-600 font-medium">
                        üè† Inicio
                    </button>
                    <button onclick="showSection('news')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üì∞ Noticias
                    </button>
                    <button onclick="showSection('purpose')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üéØ Prop√≥sito
                    </button>
                    <button onclick="showSection('rooms')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üè¢ Reservar Sala
                    </button>
                    <button onclick="showSection('resources')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üìö Recursos
                    </button>
                    <button onclick="showSection('availability')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                        üëÅÔ∏è Disponibilidad
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-6xl mx-auto p-6">
            <!-- Home Section -->
            <div id="home-section" class="section">
                <!-- Quick Actions -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow-md p-6 card-hover cursor-pointer" onclick="showSection('news')">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">Noticias</h3>
                                <p class="text-gray-600 text-sm">√öltimas actualizaciones</p>
                            </div>
                            <div class="text-3xl">üì∞</div>
                        </div>
                        <div class="mt-4">
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">2 nuevas</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-6 card-hover cursor-pointer" onclick="showSection('purpose')">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">Prop√≥sito</h3>
                                <p class="text-gray-600 text-sm">Comparte tu raz√≥n de ser</p>
                            </div>
                            <div class="text-3xl">üéØ</div>
                        </div>
                        <div class="mt-4">
                            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">3 prop√≥sitos</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-6 card-hover cursor-pointer" onclick="showSection('rooms')">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">Reservar Sala</h3>
                                <p class="text-gray-600 text-sm">Espacios disponibles</p>
                            </div>
                            <div class="text-3xl">üè¢</div>
                        </div>
                        <div class="mt-4">
                            <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">6 salas</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-6 card-hover cursor-pointer" onclick="showSection('resources')">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">Recursos</h3>
                                <p class="text-gray-600 text-sm">Documentos y gu√≠as</p>
                            </div>
                            <div class="text-3xl">üìö</div>
                        </div>
                        <div class="mt-4">
                            <span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">6 recursos</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Access -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">üöÄ Acceso R√°pido</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <button onclick="showSection('availability')" class="bg-green-50 hover:bg-green-100 p-4 rounded-lg text-left transition-colors">
                            <div class="font-semibold text-green-800">Ver Disponibilidad de Salas</div>
                            <div class="text-green-600 text-sm">Consulta horarios y reservas</div>
                        </button>
                        <button onclick="showSection('resources')" class="bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-left transition-colors">
                            <div class="font-semibold text-blue-800">Manual del Empleado</div>
                            <div class="text-blue-600 text-sm">Gu√≠a completa 2024</div>
                        </button>
                        <button onclick="showSection('purpose')" class="bg-purple-50 hover:bg-purple-100 p-4 rounded-lg text-left transition-colors">
                            <div class="font-semibold text-purple-800">Compartir Prop√≥sito</div>
                            <div class="text-purple-600 text-sm">Inspira al equipo</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- News Section -->
            <div id="news-section" class="section hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üì∞ Noticias y Actualizaciones</h2>
                <div id="news-container" class="space-y-4">
                    <!-- Las noticias se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>

            <!-- Purpose Section -->
            <div id="purpose-section" class="section hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üéØ Muro del Prop√≥sito</h2>
                
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">Comparte tu prop√≥sito</h3>
                    <form id="purpose-form">
                        <textarea id="purpose-text" placeholder="¬øCu√°l es tu prop√≥sito en Green Hub? Comparte tu raz√≥n de ser..." 
                                  class="w-full p-3 border border-gray-300 rounded-lg resize-none" rows="3"></textarea>
                        <div class="mt-4 flex justify-between items-center">
                            <input type="text" id="purpose-author" placeholder="Tu nombre" 
                                   class="px-3 py-2 border border-gray-300 rounded-lg">
                            <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">
                                Compartir Prop√≥sito
                            </button>
                        </div>
                    </form>
                </div>

                <div id="purposes-container" class="space-y-4">
                    <!-- Los prop√≥sitos se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>

            <!-- Rooms Section -->
            <div id="rooms-section" class="section hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üè¢ Reservar Sala</h2>
                
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">Nueva Reserva</h3>
                    <form id="reservation-form" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Fecha</label>
                                <input type="date" id="reservation-date" class="w-full p-3 border border-gray-300 rounded-lg" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Sala</label>
                                <select id="reservation-room" class="w-full p-3 border border-gray-300 rounded-lg" required>
                                    <option value="">Selecciona una sala</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Hora de inicio</label>
                                <select id="reservation-start" class="w-full p-3 border border-gray-300 rounded-lg" required>
                                    <option value="">Selecciona hora</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Duraci√≥n</label>
                                <select id="reservation-duration" class="w-full p-3 border border-gray-300 rounded-lg" required>
                                    <option value="1">1 hora</option>
                                    <option value="2">2 horas</option>
                                    <option value="3">3 horas</option>
                                    <option value="4">4 horas</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Reservado por</label>
                                <input type="text" id="reservation-person" placeholder="Tu nombre" 
                                       class="w-full p-3 border border-gray-300 rounded-lg" required>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Prop√≥sito de la reuni√≥n</label>
                            <textarea id="reservation-purpose" placeholder="Describe brevemente el prop√≥sito de la reuni√≥n..." 
                                      class="w-full p-3 border border-gray-300 rounded-lg resize-none" rows="2" required></textarea>
                        </div>
                        <button type="submit" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors">
                            Reservar Sala
                        </button>
                    </form>
                </div>

                <div id="rooms-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Las salas se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>

            <!-- Resources Section -->
            <div id="resources-section" class="section hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üìö Recursos</h2>
                <div id="resources-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Los recursos se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>

            <!-- Availability Section -->
            <div id="availability-section" class="section hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üëÅÔ∏è Disponibilidad de Salas</h2>
                
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <div class="flex items-center space-x-4">
                        <label class="block text-sm font-medium text-gray-700">Ver disponibilidad para:</label>
                        <input type="date" id="availability-date" class="p-2 border border-gray-300 rounded-lg" onchange="updateAvailability()">
                    </div>
                </div>

                <div id="availability-container" class="space-y-6">
                    <!-- La disponibilidad se cargar√° aqu√≠ din√°micamente -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Datos de la aplicaci√≥n
        const rooms = [
            { id: 1, name: "La Palma", capacity: 8, equipment: ["Proyector", "Pizarra", "Video conferencia"] },
            { id: 2, name: "El Tuc√°n", capacity: 12, equipment: ["TV 55\"", "Sistema de audio", "Pizarra digital"] },
            { id: 3, name: "Equation Coffee", capacity: 6, equipment: ["Cafetera", "Proyector", "Ambiente relajado"] },
            { id: 4, name: "Sala Verde", capacity: 15, equipment: ["Proyector 4K", "Sistema de sonido", "Plantas naturales"] },
            { id: 5, name: "Innovaci√≥n", capacity: 10, equipment: ["Pizarra interactiva", "C√°maras 360¬∞", "Iluminaci√≥n LED"] },
            { id: 6, name: "Sostenible", capacity: 20, equipment: ["Auditorio", "Micr√≥fono", "Pantalla gigante"] }
        ];

        const news = [
            {
                id: 1,
                title: "Nueva pol√≠tica de reciclaje implementada",
                content: "A partir del pr√≥ximo lunes, implementaremos contenedores de reciclaje especializados en todas las √°reas comunes.",
                date: "2024-01-15",
                isNew: true
            },
            {
                id: 2,
                title: "Taller de sostenibilidad - Viernes 2 PM",
                content: "√önete a nuestro taller sobre pr√°cticas sostenibles en el hogar. Sala El Tuc√°n.",
                date: "2024-01-14",
                isNew: true
            },
            {
                id: 3,
                title: "Certificaci√≥n Green Office obtenida",
                content: "¬°Celebramos haber obtenido la certificaci√≥n Green Office nivel Gold!",
                date: "2024-01-10",
                isNew: false
            }
        ];

        let reservations = [
            {
                id: 1,
                roomId: 1,
                roomName: "La Palma",
                date: "2024-01-16",
                startTime: "09:00",
                duration: 2,
                person: "Ana Garc√≠a",
                purpose: "Reuni√≥n de equipo marketing"
            },
            {
                id: 2,
                roomId: 2,
                roomName: "El Tuc√°n",
                date: "2024-01-16",
                startTime: "14:00",
                duration: 1,
                person: "Carlos L√≥pez",
                purpose: "Presentaci√≥n de resultados"
            }
        ];

        let purposes = [
            {
                id: 1,
                author: "Equipo Marketing",
                purpose: "Reducir el uso de papel en nuestras campa√±as digitales y promover la comunicaci√≥n electr√≥nica.",
                date: "2024-01-15"
            },
            {
                id: 2,
                author: "Departamento IT",
                purpose: "Implementar servidores m√°s eficientes energ√©ticamente y reducir el consumo el√©ctrico en 30%.",
                date: "2024-01-14"
            },
            {
                id: 3,
                author: "Recursos Humanos",
                purpose: "Crear programas de transporte sostenible para empleados, incluyendo bicicletas compartidas.",
                date: "2024-01-12"
            }
        ];

        const resources = [
            {
                id: 1,
                title: "Manual del Empleado 2024",
                type: "PDF",
                url: "/documents/manual-empleado-2024.pdf",
                description: "Gu√≠a completa para nuevos empleados"
            },
            {
                id: 2,
                title: "Gu√≠a de Sostenibilidad",
                type: "PDF",
                url: "/documents/guia-sostenibilidad.pdf",
                description: "Pr√°cticas eco-amigables en la oficina"
            },
            {
                id: 3,
                title: "Objetivos Green Hub 2024",
                type: "Presentaci√≥n",
                url: "/documents/objetivos-2024.pptx",
                description: "Metas y proyectos para este a√±o"
            },
            {
                id: 4,
                title: "Directorio de Contactos",
                type: "Excel",
                url: "/documents/directorio-contactos.xlsx",
                description: "Lista completa de empleados y departamentos"
            },
            {
                id: 5,
                title: "Herramientas Digitales",
                type: "Web",
                url: "https://tools.greenhub.com",
                description: "Acceso a plataformas internas"
            },
            {
                id: 6,
                title: "Biblioteca Digital",
                type: "Web",
                url: "https://library.greenhub.com",
                description: "Recursos de aprendizaje y desarrollo"
            }
        ];

        // Funciones de navegaci√≥n
        function showSection(sectionName) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar la secci√≥n seleccionada
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('border-green-500', 'text-green-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            event.target.classList.remove('border-transparent', 'text-gray-500');
            event.target.classList.add('border-green-500', 'text-green-600');

            // Cerrar dropdown de notificaciones si est√° abierto
            document.getElementById('notification-dropdown').classList.remove('show');
        }

        // Funciones de notificaciones
        function toggleNotifications() {
            const dropdown = document.getElementById('notification-dropdown');
            dropdown.classList.toggle('show');
            loadNotifications();
        }

        function loadNotifications() {
            const notificationList = document.getElementById('notification-list');
            const recentNews = news.filter(item => item.isNew).slice(0, 3);
            
            notificationList.innerHTML = recentNews.map(item => `
                <div class="p-3 hover:bg-gray-50 border-b border-gray-100 cursor-pointer" onclick="showSection('news')">
                    <div class="font-medium text-gray-800 text-sm">${item.title}</div>
                    <div class="text-gray-600 text-xs mt-1">${item.date}</div>
                </div>
            `).join('');

            // Actualizar contador
            document.getElementById('notification-count').textContent = recentNews.length;
        }

        // Cerrar dropdown al hacer clic fuera
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('notification-dropdown');
            const button = event.target.closest('button');
            
            if (!button || !button.onclick || button.onclick.toString().indexOf('toggleNotifications') === -1) {
                dropdown.classList.remove('show');
            }
        });

        // Funciones de noticias
        function loadNews() {
            const newsContainer = document.getElementById('news-container');
            newsContainer.innerHTML = news.map(item => `
                <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-lg font-semibold text-gray-800">${item.title}</h3>
                        ${item.isNew ? '<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Nueva</span>' : ''}
                    </div>
                    <p class="text-gray-600 mb-3">${item.content}</p>
                    <div class="text-sm text-gray-500">${item.date}</div>
                </div>
            `).join('');
        }

        // Funciones de prop√≥sitos
        function loadPurposes() {
            const purposesContainer = document.getElementById('purposes-container');
            purposesContainer.innerHTML = purposes.map(item => `
                <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-lg">
                            ${item.author.charAt(0)}
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-gray-800">${item.author}</h4>
                                <span class="text-sm text-gray-500">${item.date}</span>
                            </div>
                            <p class="text-gray-600 italic">"${item.purpose}"</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Manejar formulario de prop√≥sitos
        document.getElementById('purpose-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const author = document.getElementById('purpose-author').value;
            const purposeText = document.getElementById('purpose-text').value;
            
            if (author && purposeText) {
                const newPurpose = {
                    id: Date.now(),
                    author: author,
                    purpose: purposeText,
                    date: new Date().toISOString().split('T')[0]
                };
                
                purposes.unshift(newPurpose);
                loadPurposes();
                
                // Limpiar formulario
                document.getElementById('purpose-author').value = '';
                document.getElementById('purpose-text').value = '';
                
                alert('¬°Prop√≥sito compartido exitosamente!');
            }
        });

        // Funciones de salas
        function loadRooms() {
            const roomsContainer = document.getElementById('rooms-container');
            roomsContainer.innerHTML = rooms.map(room => {
                const todayReservations = reservations.filter(r => 
                    r.roomId === room.id && r.date === new Date().toISOString().split('T')[0]
                ).length;
                
                return `
                    <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">${room.name}</h3>
                        <div class="text-gray-600 mb-3">
                            <p>üë• Capacidad: ${room.capacity} personas</p>
                            <p>üìÖ Reservas hoy: ${todayReservations}</p>
                        </div>
                        <div class="mb-4">
                            <h4 class="font-medium text-gray-700 mb-2">Equipamiento:</h4>
                            <div class="flex flex-wrap gap-1">
                                ${room.equipment.map(eq => `
                                    <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">${eq}</span>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Cargar opciones de salas en el formulario
        function loadRoomOptions() {
            const roomSelect = document.getElementById('reservation-room');
            roomSelect.innerHTML = '<option value="">Selecciona una sala</option>' + 
                rooms.map(room => `<option value="${room.id}">${room.name} (${room.capacity} personas)</option>`).join('');
        }

        // Cargar opciones de horarios
        function loadTimeOptions() {
            const timeSelect = document.getElementById('reservation-start');
            const times = [];
            for (let hour = 8; hour <= 18; hour++) {
                times.push(`${hour.toString().padStart(2, '0')}:00`);
            }
            timeSelect.innerHTML = '<option value="">Selecciona hora</option>' + 
                times.map(time => `<option value="${time}">${time}</option>`).join('');
        }

        // Verificar disponibilidad y actualizar opciones
        function updateTimeAvailability() {
            const date = document.getElementById('reservation-date').value;
            const roomId = parseInt(document.getElementById('reservation-room').value);
            const timeSelect = document.getElementById('reservation-start');
            
            if (!date || !roomId) return;
            
            // Obtener reservas existentes para esta sala y fecha
            const existingReservations = reservations.filter(r => 
                r.roomId === roomId && r.date === date
            );
            
            // Actualizar opciones de tiempo
            Array.from(timeSelect.options).forEach(option => {
                if (option.value === '') return;
                
                const timeHour = parseInt(option.value.split(':')[0]);
                const isOccupied = existingReservations.some(reservation => {
                    const startHour = parseInt(reservation.startTime.split(':')[0]);
                    const endHour = startHour + reservation.duration;
                    return timeHour >= startHour && timeHour < endHour;
                });
                
                if (isOccupied) {
                    option.textContent = option.value + ' (Ocupado)';
                    option.disabled = true;
                    option.classList.add('occupied');
                } else {
                    option.textContent = option.value;
                    option.disabled = false;
                    option.classList.remove('occupied');
                }
            });
        }

        // Event listeners para actualizar disponibilidad
        document.getElementById('reservation-date').addEventListener('change', updateTimeAvailability);
        document.getElementById('reservation-room').addEventListener('change', updateTimeAvailability);

        // Manejar formulario de reservas
        document.getElementById('reservation-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const date = document.getElementById('reservation-date').value;
            const roomId = parseInt(document.getElementById('reservation-room').value);
            const startTime = document.getElementById('reservation-start').value;
            const duration = parseInt(document.getElementById('reservation-duration').value);
            const person = document.getElementById('reservation-person').value;
            const purpose = document.getElementById('reservation-purpose').value;
            
            if (date && roomId && startTime && duration && person && purpose) {
                const room = rooms.find(r => r.id === roomId);
                
                const newReservation = {
                    id: Date.now(),
                    roomId: roomId,
                    roomName: room.name,
                    date: date,
                    startTime: startTime,
                    duration: duration,
                    person: person,
                    purpose: purpose
                };
                
                reservations.push(newReservation);
                
                // Limpiar formulario
                this.reset();
                
                // Actualizar disponibilidad
                updateTimeAvailability();
                loadRooms();
                
                alert(`¬°Sala ${room.name} reservada exitosamente para el ${date} de ${startTime} por ${duration} hora(s)!`);
            }
        });

        // Funciones de recursos
        function loadResources() {
            const resourcesContainer = document.getElementById('resources-container');
            resourcesContainer.innerHTML = resources.map(resource => {
                const typeColors = {
                    'PDF': 'bg-red-100 text-red-800',
                    'Excel': 'bg-green-100 text-green-800',
                    'Presentaci√≥n': 'bg-orange-100 text-orange-800',
                    'Web': 'bg-blue-100 text-blue-800',
                    'Documento': 'bg-gray-100 text-gray-800'
                };
                
                return `
                    <div class="bg-white rounded-lg shadow-md p-6 card-hover">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-lg font-semibold text-gray-800">${resource.title}</h3>
                            <span class="text-xs px-2 py-1 rounded-full ${typeColors[resource.type] || 'bg-gray-100 text-gray-800'}">${resource.type}</span>
                        </div>
                        <p class="text-gray-600 mb-4">${resource.description}</p>
                        <a href="${resource.url}" target="_blank" 
                           class="inline-flex items-center text-green-600 hover:text-green-700 font-medium">
                            Abrir recurso
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                            </svg>
                        </a>
                    </div>
                `;
            }).join('');
        }

        // Funciones de disponibilidad
        function updateAvailability() {
            const date = document.getElementById('availability-date').value;
            if (!date) return;
            
            const availabilityContainer = document.getElementById('availability-container');
            
            availabilityContainer.innerHTML = rooms.map(room => {
                const roomReservations = reservations.filter(r => r.roomId === room.id && r.date === date);
                
                return `
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">${room.name}</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-medium text-gray-700 mb-2">Informaci√≥n de la sala:</h4>
                                <p class="text-gray-600">üë• Capacidad: ${room.capacity} personas</p>
                                <p class="text-gray-600">üìÖ Reservas: ${roomReservations.length}</p>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-700 mb-2">Reservas para ${date}:</h4>
                                ${roomReservations.length > 0 ? 
                                    roomReservations.map(reservation => `
                                        <div class="bg-red-50 border border-red-200 rounded p-2 mb-2">
                                            <div class="text-sm font-medium text-red-800">
                                                ${reservation.startTime} - ${getEndTime(reservation.startTime, reservation.duration)}
                                            </div>
                                            <div class="text-xs text-red-600">
                                                ${reservation.person} - ${reservation.purpose}
                                            </div>
                                        </div>
                                    `).join('') 
                                    : '<p class="text-green-600 text-sm">‚úÖ Disponible todo el d√≠a</p>'
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Funci√≥n auxiliar para calcular hora de fin
        function getEndTime(startTime, duration) {
            const [hours, minutes] = startTime.split(':').map(Number);
            const endHour = hours + duration;
            return `${endHour.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            // Establecer fecha m√≠nima para reservas (hoy)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('reservation-date').min = today;
            document.getElementById('availability-date').value = today;
            
            // Cargar datos iniciales
            loadNews();
            loadPurposes();
            loadRooms();
            loadRoomOptions();
            loadTimeOptions();
            loadResources();
            loadNotifications();
            updateAvailability();
        });
    </script>
</body>
</html>